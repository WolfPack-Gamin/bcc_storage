(function(){"use strict";var e={8518:function(e,t,n){var i=n(9242),o=n(3396),s=n(7139);const a={class:"cont-content",ref:"draggableContainer"},r={class:"buttons"},l={class:"flex-container"},d={key:0,class:"dev"};function c(e,t,n,c,u,v){const m=(0,o.up)("mdicon"),p=(0,o.up)("Spinner"),h=(0,o.up)("InputModal"),g=(0,o.up)("Inventory");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o._)("div",a,[(0,o._)("div",r,[(0,o.Wm)(m,{class:"drag",onMousedown:v.dragMouseDown,name:"cursor-move",size:"18"},null,8,["onMousedown"]),(0,o.Wm)(m,{class:"close",name:"close-thick",size:"18",onClick:v.closeStorage},null,8,["onClick"])]),(0,o.Wm)(p,{showing:u.spinnerload.active,message:u.spinnerload.message},null,8,["showing","message"]),(0,o.Wm)(h,{showing:u.howMany.active,max:u.howMany.max,onAddItem:v.continueMove},null,8,["showing","max","onAddItem"]),(0,o._)("div",l,[(0,o.Wm)(g,{onToggleActive:v.handleActive,dropzone:u.iactive,onOnmoved:v.handleMoved,class:"flex-child",dev:u.dev,disabled:u.disabled,header:"satchel",type:"inv",inventory:u.playerinventory},null,8,["onToggleActive","dropzone","onOnmoved","dev","disabled","inventory"]),(0,o.Wm)(g,{onToggleActive:v.handleActive,dropzone:u.sactive,onOnmoved:v.handleMoved,class:"flex-child",dev:u.dev,disabled:u.disabled,header:"storage",type:"str",inventory:u.playerstorage},null,8,["onToggleActive","dropzone","onOnmoved","dev","disabled","inventory"])])],512),[[i.F8,u.showing]]),u.dev?((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("pre",null,"Storage Active: "+(0,s.zw)(u.sactive),1),(0,o._)("pre",null,"Storage Active: "+(0,s.zw)(u.iactive),1),(0,o._)("pre",null,"Inventory: "+(0,s.zw)(u.playerinventory),1),(0,o._)("pre",null,"Storage: "+(0,s.zw)(u.playerstorage),1)])):(0,o.kq)("",!0)])}const u=e=>((0,o.dD)("data-v-303b6035"),e=e(),(0,o.Cn)(),e),v={style:{position:"relative"}},m=["id"],p={class:"inventory"},h=u((()=>(0,o._)("hr",null,null,-1))),g={key:0},y={class:"items"};function f(e,t,n,i,a,r){const l=(0,o.up)("Tile"),d=(0,o.up)("Preview");return(0,o.wg)(),(0,o.iD)("div",v,[n.dropzone?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"activedrop",id:n.type},null,8,m)):(0,o.kq)("",!0),(0,o._)("div",p,[(0,o._)("h1",null,(0,s.zw)(n.header),1),h,!a.compinventory||a.compinventory.length<=0?((0,o.wg)(),(0,o.iD)("h3",g,"Drag an item to add it to this inventory")):(0,o.kq)("",!0),(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.compinventory,((e,i)=>((0,o.wg)(),(0,o.j4)(l,{dev:n.dev,disabled:n.disabled,onToggleActive:r.toggleActive,onOnmoved:r.handleMoved,sid:n.type,index:i,item:e,key:"inv"+i,onMouseover:t=>a.activeItem=e,onMouseleave:t[0]||(t[0]=e=>a.activeItem={})},null,8,["dev","disabled","onToggleActive","onOnmoved","sid","index","item","onMouseover"])))),128))])]),(0,o.Wm)(d,{alignLeft:"str"==n.type,activeItem:a.activeItem},null,8,["alignLeft","activeItem"])])}function b(e,t,n,a,r,l){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)({preview:!n.alignLeft,previewleft:n.alignLeft})},[(0,o._)("div",null,(0,s.zw)(n.activeItem.label),1),(0,o._)("div",null,(0,s.zw)(n.activeItem.count)+"/"+(0,s.zw)(n.activeItem.limit),1)],2)),[[i.F8,n.activeItem.label]])}var w={name:"Preview",props:{activeItem:{type:Object,requred:!1,default:{}},alignLeft:{type:Boolean,requred:!1,default:!1}},data(){return{}},mounted(){},methods:{}},_=n(89);const q=(0,_.Z)(w,[["render",b],["__scopeId","data-v-6241a5e0"]]);var M=q;const I={class:"filter"},x={class:"content"},D={class:"quantity"},S=["src","alt"];function k(e,t,n,i,a,r){return(0,o.wg)(),(0,o.iD)("div",{class:"item",ref:"draggableItemContainer"+n.index,onMousedown:t[0]||(t[0]=e=>r.dragStart(e,"draggableItemContainer"+n.index,n.index))},[(0,o._)("div",I,[(0,o._)("div",x,(0,s.zw)(n.item.label),1)]),(0,o._)("div",D,(0,s.zw)(n.item.count)+"/"+(0,s.zw)(n.item.limit),1),n.item.name?((0,o.wg)(),(0,o.iD)("img",{key:0,src:`nui://vorp_inventory/html/img/items/${n.item.name}.png`,alt:n.item.label,loading:"lazy"},null,8,S)):(0,o.kq)("",!0)],544)}n(6699);var z={name:"Item",props:{item:{type:Object,requred:!0},index:{type:Number,requred:!0},sid:{type:String,requred:!0},disabled:{type:Boolean,requred:!1,default:!1},dev:{type:Boolean,requred:!1,default:!1}},data(){return{positions:{clientX:void 0,clientY:void 0,movementX:0,movementY:0,initialStyle:void 0},spots:{first:[1,5,9,13,17,21,25,29,33,37,41,45,49,53,57,61,65,69,73,77,81,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,169,173,177,181,185,189,193,197],second:[2,6,10,14,18,22,26,30,34,38,42,46,50,54,58,62,66,70,74,78,82,86,90,94,98,102,106,110,114,118,122,126,130,134,138,142,146,150,154,158,162,166,170,174,178,182,186,190,194,198],third:[3,7,11,15,19,23,27,31,35,39,43,47,51,55,59,63,67,71,75,79,83,87,91,95,99,103,107,111,115,119,123,127,131,135,139,143,147,151,155,159,163,167,171,175,179,183,187,191,195,199],fourth:[4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200]}}},components:{},watch:{},mounted(){},emits:["onmoved","toggleActive"],methods:{dragStart(e,t,n){e.preventDefault(),this.disabled||(this.$emit("toggleActive",!0),this.positions.clientX=e.clientX-10,this.positions.clientY=e.clientY,this.positions.initialStyle=this.$refs[t].style,document.onmousemove=e=>this.elementDrag(e,t,n),document.onmouseup=e=>this.dragEnd(e,t))},elementDrag(e,t,n){e.preventDefault();let i=e.clientX,o=e.clientY,s=n+1;this.spots.first.includes(s)&&(i-=200),this.spots.second.includes(s)&&(i-=120),this.spots.third.includes(s)&&(i-=50),this.spots.fourth.includes(s),this.positions.movementX=this.positions.clientX-i,this.positions.movementY=this.positions.clientY-o,this.positions.clientX=i,this.positions.clientY=o,this.move(this.$refs[t],this.positions.movementX,this.positions.movementY)},dragEnd(e,t){this.$emit("toggleActive",!1),this.positions.clientX=void 0,this.positions.clientY=void 0,this.positions.movementX=0,this.positions.movementY=0,document.onmouseup=null,document.onmousemove=null;let n=e.target.id;if(console.log(n||"None"),console.log(e),"str"!==n&&"inv"!==n||this.sid==n){let e=this.$refs[t];e.style=this.positions.initialStyle}else{this.$emit("onmoved",{data:this.item,to:n,from:this.sid});let e=this.$refs[t];e.style=this.positions.initialStyle}},move(e,t,n){e.style.position="fixed",e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}}};const O=(0,_.Z)(z,[["render",k],["__scopeId","data-v-3a20a43e"]]);var X=O,A={name:"Inventory",props:{header:{type:String,requred:!1,default:"Satchel"},type:{type:String,required:!0},inventory:{type:Object,requred:!1,default:[]},dropzone:{type:Boolean,required:!1,default:!1},dev:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},data(){return{activeItem:{},compinventory:[]}},emits:["onmoved"],components:{Preview:M,Tile:X,Tile:X},watch:{inventory(e){this.compinventory=e}},methods:{handleMoved(e){this.$emit("onmoved",{data:e.data,to:e.to,from:e.from})},toggleActive(e){this.$emit("toggleActive",{active:e,from:this.type})},removeByLabel(e,t){const n=e.findIndex((e=>e.label===String(t)));return-1!==n&&!!e.splice(n,1)}}};const Y=(0,_.Z)(A,[["render",f],["__scopeId","data-v-303b6035"]]);var C=Y;const T={class:"load-modal"},L=(0,o.uE)('<div class="wrap-model" data-v-1fedcdc6><div class="revolver" data-v-1fedcdc6><section class="revolver__part" data-v-1fedcdc6></section><section class="revolver__part" data-v-1fedcdc6></section><section class="revolver__part" data-v-1fedcdc6></section><section class="revolver__part" data-v-1fedcdc6></section><section class="revolver__part" data-v-1fedcdc6></section><section class="revolver__part" data-v-1fedcdc6></section></div></div>',1),$={class:"loading"};function N(e,t,n,a,r,l){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",T,[L,(0,o._)("div",$,(0,s.zw)(n.message),1)],512)),[[i.F8,n.showing]])}var B={name:"Spinner",props:{message:{type:String,requred:!1,default:"Loading..."},showing:{type:Boolean,requred:!1,default:!1}},data(){return{}}};const j=(0,_.Z)(B,[["render",N],["__scopeId","data-v-1fedcdc6"]]);var P=j;const E={class:"input-modal"},W={class:"input-wrap"},Z={class:"inputs"},F={class:"message"};function H(e,t,n,a,r,l){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("div",W,[(0,o._)("div",Z,[(0,o._)("div",F,(0,s.zw)(n.message),1),(0,o._)("div",{class:"value-button",id:"decrease",onClick:t[0]||(t[0]=(...e)=>l.decrease&&l.decrease(...e))},"-"),(0,o.wy)((0,o._)("input",{type:"number",id:"number","onUpdate:modelValue":t[1]||(t[1]=e=>r.quantity=e),onKeyup:t[2]||(t[2]=(...e)=>l.formatQuantity&&l.formatQuantity(...e))},null,544),[[i.nr,r.quantity]]),(0,o._)("div",{class:"value-button",id:"increase",onClick:t[3]||(t[3]=(...e)=>l.increase&&l.increase(...e))},"+"),(0,o._)("div",{class:"add-button",onClick:t[4]||(t[4]=(...e)=>l.emitItems&&l.emitItems(...e))},"Add Item"+(0,s.zw)(r.quantity>1?"s":""),1)])])],512)),[[i.F8,n.showing]])}var J={name:"InputModal",props:{message:{type:String,requred:!1,default:"How Many?"},showing:{type:Boolean,requred:!1,default:!1},max:{type:Number,requred:!1,default:10}},data(){return{quantity:1,min:1}},emits:["addItem"],watch:{showing(e){e||(this.quantity=1)}},methods:{emitItems(){this.$emit("addItem",this.quantity)},formatQuantity(){this.quantity<=this.min-1&&(this.quantity=this.min),this.quantity>this.max&&(this.quantity=this.max)},increase(){let e=this.quantity;e=isNaN(e)?this.min:e,e>=this.max&&(e=this.max-1),e++,this.quantity=e},decrease(){let e=this.quantity;e=isNaN(e)?this.min:e,e<this.min&&(e=this.min),e--,e<this.min&&(e=this.min),this.quantity=e}}};const G=(0,_.Z)(J,[["render",H],["__scopeId","data-v-55f8cdca"]]);var Q=G,R=n(4806),K={name:"HomeView",data(){return{dev:!1,showing:!1,entity:null,coords:{z:0,y:0,z:0},playerinventory:[],playerstorage:[],sactive:!1,iactive:!1,disabled:!1,spinnerload:{active:!1,message:"Saving Changes..."},howMany:{active:!1,max:1,qount:1,mv:null},positions:{clientX:void 0,clientY:void 0,movementX:0,movementY:0},testdata:[{limit:10,count:1,name:"ammorevolvernormal",label:"Revolver Ammo Normal",usable:!0,type:"item_standard"},{limit:10,count:6,name:"water",label:"Water",usable:!0,type:"item_standard"},{limit:10,count:1,name:"bread",label:"Bread",usable:!0,type:"item_standard"},{limit:10,count:1,name:"book",label:"Book",usable:!0,type:"item_standard"}]}},mounted(){if(window.addEventListener("message",this.onMessage),document.onmousemove=this.handleMouseMove,this.dev){this.showing=!0;let e=[];for(let t=0;t<4;t++)e.push(this.testdata[t]);this.playerinventory=e}},destroyed(){window.removeEventListener("message")},components:{Inventory:C,Spinner:P,InputModal:Q},methods:{cleanData(e){return e&&e.replaceAll("\\","").replaceAll('"[',"[").replaceAll(']"',"]")},onMessage(e){if("bccopen"===e.data.type){this.playerstorage=[],this.playerinventory=[];let t=e.data,n=this.cleanData(t.playerstorage);n=JSON.parse(n);let i=JSON.parse(t.playerinventory);this.playerinventory=i||[],this.playerstorage=n||[],this.entity=t.entity,this.coords.x=t.x,this.coords.y=t.y,this.coords.z=t.z,this.showing=!0}"bccstopspinner"===e.data.type&&(this.spinnerload.message="Loading...",this.spinnerload.active=!1,this.disabled=!1,this.howMany={active:!1,max:1,qount:1,mv:null})},handleActive(e){let t=e.from;"str"===t?this.iactive=e.active:"inv"===t&&(this.sactive=e.active)},handleMoved(e){this.disabled=!0,this.howMany.active=!0,this.howMany.mv=e,this.howMany.max=e.data.count,1===e.data.count&&this.continueMove(1)},continueMove(e){let t=this.howMany.mv;this.spinnerload.message="Saving Changes...",this.spinnerload.active=!0;let n=t.data,i=t.to,o=t.from,s=[],a=[],r={inv:{add:[],remove:[]},str:{storage:[],add:[],remove:[]}};switch(o){case"inv":if(a=(0,R.cloneDeep)(this.playerinventory),e<n.count){let t=(0,R.find)(a,(function(e){return e.label===n.label}));t.count=t.count-e}else(0,R.remove)(a,(function(e){return e.label===n.label}));n.count=e,this.playerinventory=a,r.inv.remove.push(n);break;case"str":if(a=(0,R.cloneDeep)(this.playerstorage),e<n.count){let t=(0,R.find)(a,(function(e){return e.label===n.label}));t.count=t.count-e}else(0,R.remove)(a,(function(e){return e.label===n.label}));n.count=e,this.playerstorage=a,r.str.remove.push(n);break;default:break}switch(i){case"inv":s=(0,R.cloneDeep)(this.playerinventory);let t=(0,R.find)(s,(function(e){return e.label===n.label}));t?(t.count+=e,n.count+=e):s.push(n),this.playerinventory=s,r.inv.add.push(n);break;case"str":s=(0,R.cloneDeep)(this.playerstorage);let i=(0,R.find)(s,(function(e){return e.label===n.label}));i?(i.count+=e,n.count+=e):s.push(n),this.playerstorage=s,r.str.add.push(n);break;default:break}r.str.storage=this.playerstorage,this.dev?(this.spinnerload.message="Loading...",this.spinnerload.active=!1,this.disabled=!1,this.howMany={active:!1,max:1,qount:1,mv:null}):fetch(`https://${GetParentResourceName()}/updateStorage`,{method:"POST",body:JSON.stringify({changes:r,coords:this.coords})})},closeStorage(){this.showing=!1,fetch(`https://${GetParentResourceName()}/bccclose`,{method:"POST",body:JSON.stringify({storage:this.entity})})},dragMouseDown:function(e){e.preventDefault(),this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,document.onmousemove=this.elementDrag,document.onmouseup=this.closeDragElement},elementDrag:function(e){e.preventDefault(),this.positions.movementX=this.positions.clientX-e.clientX,this.positions.movementY=this.positions.clientY-e.clientY,this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,this.$refs.draggableContainer.style.top=this.$refs.draggableContainer.offsetTop-this.positions.movementY+"px",this.$refs.draggableContainer.style.left=this.$refs.draggableContainer.offsetLeft-this.positions.movementX+"px"},closeDragElement(){document.onmouseup=null,document.onmousemove=null},handleMouseMove(e){var t,n,i;e=e||window.event,null==e.pageX&&null!=e.clientX&&(t=e.target&&e.target.ownerDocument||document,n=t.documentElement,i=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0))}}};const V=(0,_.Z)(K,[["render",c]]);var U=V,ee=n(9793),te=n(6526);(0,i.ri)(U).use(ee.Z,{icons:{mdiCursorMove:te.PbN,mdiCloseThick:te.mGH}}).mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var a=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],s=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,s<a&&(a=s));if(r){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,a=i[0],r=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var c=l(n)}for(t&&t(i);d<a.length;d++)s=a[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},i=self["webpackChunkdev"]=self["webpackChunkdev"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(8518)}));i=n.O(i)})();
//# sourceMappingURL=app.js.map